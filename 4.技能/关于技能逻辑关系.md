## 概述

### 相关插件

Rmmv的技能逻辑机制比较复杂，其中与技能逻辑相关的插件如下：

◆Drill_SkillRecorder 技能 - 技能记录器

◆Drill_AnimationInSkill 动画 - 并行动画绑定于技能

## 基本逻辑

### 施法者与目标

**任何技能，包括
攻击/防御/闪避/反击/反射/使用物品/逃跑/掩护，都有两个角色，施法者(攻击者)
与 目标(被攻击者)。**

（注意，战斗回合界面的逃跑选项，不是逃跑技能，不会被技能记录仪捕获。）

自己打自己，自己治疗自己，则自己既是施法者，又是目标。

![F:\\rpg
mv箱\\【素材、灵感】\\【图片-文档描述】\\技能关系描述1.png](media/image1.png){width="4.666666666666667in"
height="2.0728291776027996in"}

普通攻击与释放技能意思一样，只是称呼不同，叫做 攻击者 与 被攻击者。

以下是称呼列表，实际指向意思是一模一样的。

  -----------------------------------------------------------------------
                    主动                      被动
  ----------------- ------------------------- ---------------------------
  一般称呼          攻击者                    被攻击者

  技能称呼          施法者                    目标

  物品称呼          使用者                    作用目标
  -----------------------------------------------------------------------

### 一次与连续攻击

连续攻击，原理为同一个技能**计算数值、施加状态多次**，所以造成的伤害、闪避情况、状态施加的结果都相互独立。

![F:\\rpg
mv箱\\【素材、灵感】\\【图片-文档描述】\\技能关系描述2.png](media/image2.png){width="4.291666666666667in"
height="1.9062620297462818in"}

### 单体与多个目标

多个目标，原理为**同一个技能根据目标ID从左至右，分别拆成单体一次/连续攻击**，再进行下一步操作。

![F:\\rpg
mv箱\\【素材、灵感】\\【图片-文档描述】\\技能关系描述3.png](media/image3.png){width="5.041666666666667in"
height="4.254851268591426in"}

### 技能中的公共事件

技能中可以设置公共事件，并且公共事件可以直接通过 技能记录器
插件获取到技能的施法者和目标。

**但是，公共事件与连续攻击、多目标是分离的，它在技能中只执行一次。**

![](media/image4.png){width="2.5833333333333335in"
height="0.9122156605424322in"}

![](media/image5.png){width="4.483333333333333in"
height="2.097638888888889in"}

根据前面的逻辑介绍，公共事件有下面的特点：

1.  公共事件每次执行，都是单体对单体。

2.  技能释放miss了，技能的公共事件不会被执行。

3.  技能作用于多个目标，只在第一个目标执行公共事件。

4.  技能连续作用于某个目标，只在第一个目标执行公共事件。

**也就是说，在公共事件里获取上一个目标，在落空情况、群体技能、连续技能中都有效，但是由于功能受限，只能对第一个目标起效。**

## 战斗界面

### 双方阵营

**目前战斗界面明确分为两方阵营，即敌方与我方**。

对于一次技能攻击发动，根据施法者与目标关系，会变成下面4种情况：

我方-\>我方，我方-\>敌方，敌方-\>我方，敌方-\>敌方

![F:\\rpg
mv箱\\【素材、灵感】\\【图片-文档描述】\\技能关系描述4.png](media/image6.png){width="5.768055555555556in"
height="4.867878390201225in"}

自己打自己，自己治疗自己，则自己既是施法者，又是目标。

并且算作 我方-\>我方 或者 敌方-\>敌方。

另外需要注意的是，只有玩家(我方)才能够**使用物品**，敌方不能使用物品，只能释放技能。

### 阵营与ID

注意，**我方只有角色ID，敌方只有敌人ID**。

![](media/image7.jpeg){width="5.768055555555556in"
height="4.082638888888889in"}

+---------------+------------------------------------------------------+
| 关系          | 插件指令                                             |
+===============+======================================================+
| 我方-\>我方   | \>技能记录器 : 我方 : 上一个施法者ID : 21            |
|               |                                                      |
|               | \>技能记录器 : 我方 : 上一个施法者队伍序号 : 21      |
|               |                                                      |
|               | \>技能记录器 : 我方 : 上一个目标角色ID : 21          |
|               |                                                      |
|               | \>技能记录器 : 我方 : 上一个目标我方队伍序号 : 21    |
+---------------+------------------------------------------------------+
| 我方-\>敌方   | \>技能记录器 : 我方 : 上一个施法者ID : 21            |
|               |                                                      |
|               | \>技能记录器 : 我方 : 上一个施法者队伍序号 : 21      |
|               |                                                      |
|               | \>技能记录器 : 我方 : 上一个目标敌人ID : 21          |
|               |                                                      |
|               | \>技能记录器 : 我方 : 上一个目标敌方队伍序号 : 21    |
+---------------+------------------------------------------------------+
| 敌方-\>我方   | \>技能记录器 : 敌方 : 上一个施法者ID : 21            |
|               |                                                      |
|               | \>技能记录器 : 敌方 : 上一个施法者ID : 21            |
|               |                                                      |
|               | \>技能记录器 : 敌方 : 上一个目标角色ID : 21          |
|               |                                                      |
|               | \>技能记录器 : 敌方 : 上一个目标我方队伍序号 : 21    |
+---------------+------------------------------------------------------+
| 敌方-\>敌方   | \>技能记录器 : 敌方 : 上一个施法者ID : 21            |
|               |                                                      |
|               | \>技能记录器 : 敌方 : 上一个施法者队伍序号 : 21      |
|               |                                                      |
|               | \>技能记录器 : 敌方 : 上一个目标敌人ID : 21          |
|               |                                                      |
|               | \>技能记录器 : 敌方 : 上一个目标敌方队伍序号 : 21    |
+---------------+------------------------------------------------------+

需要注意的是，敌人ID很可能会重复，因为你可以放置多个一样的敌人。其它参数基本不会出现重复情况。

![](media/image8.jpeg){width="5.768055555555556in"
height="3.213888888888889in"}

## 地图界面

目前没有**任何**在地图界面作用的技能、物品。

## 菜单界面

**菜单只有将 物品/技能 作用于自己成员的功能，即 我方-\>我方 。**
