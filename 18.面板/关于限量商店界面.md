**概述**

**插件介绍**

基础插件：

◆Drill_CoreOfWindowAuxiliary 系统 - 窗口辅助核心

◆Drill_CoreOfWaitressSprite 主菜单 - 服务员核心

相关插件：

◆Drill_SenceShop 面板 - 全自定义商店界面

◆Drill_SceneLimitedShop 面板 - 限量商店

由于插件内容非常多，这里只针对 **限量商店** 进行说明。

**快速区分**

  ----------------------------------------------------------------------------------------------------------------
         商店界面                                             限量商店
  ------ ---------------------------------------------------- ----------------------------------------------------
  特点   Rmmv默认的商店模式，可多买。                         只能购买，一个一个买，且限量。

  结构   7个窗口 + 1个按钮组 + 1个服务员                      4个窗口 + 1个按钮组 + 1个服务员

  参数   ![](media/image1.png){width="2.1585203412073493in"   ![](media/image2.png){width="2.3252012248468943in"
         height="1.9251673228346458in"}                       height="1.933500656167979in"}
  ----------------------------------------------------------------------------------------------------------------

**\
**

**插件关系**

商店插件之间的关系如下：（两个商店界面功能相似，但实际并没有任何关系。）

![](media/image4.emf)

## **商店**

**结构/流程**

注意，**流程**是程序内部无法改变的固定业务逻辑结构，你可以换界面、换外皮，但是无法改变流程，除非新写插件。

限量插件只有一个流程，即购买物品流程：

![](media/image5.jpeg){width="3.1in" height="2.355702099737533in"}
![](media/image6.jpeg){width="3.1in" height="2.355703193350831in"}

1).进入界面 \> 服务员 + 金钱窗口 + 商品窗口(商品按钮组) + 帮助窗口

2).选择一个物品 \> 服务员 + 金钱窗口 + 商品窗口(商品按钮组) + 帮助窗口 +
确认窗口

3).确认购买 \> 返回流程1)

**窗口与按钮组**

窗口和按钮的结构如下：

宽度和高度都是用于控制绘制物品名、限量等数据而控制的。与资源图片高宽没有关系。

![](media/image7.jpeg){width="2.575in" height="2.4796292650918637in"}
![](media/image8.png){width="2.8583333333333334in"
height="2.353151793525809in"}

![](media/image9.jpeg){width="2.558333333333333in"
height="0.8290890201224846in"}
![](media/image10.png){width="2.9583333333333335in"
height="1.5749759405074366in"}

按钮组运动方式如下：

1.物品滚动进入上限隐藏点或者下限隐藏点时，会自动隐藏。比如图中的4以后的物品。

2.点击购买物品时，处于**有效点**的物品，为当前选中的物品。

3.你可以修改有效点，但是一般都以序列点的最中间那个点为准。比如图中的5个点，有效点设为第3个点。

![](media/image11.png){width="2.6666666666666665in"
height="2.5679002624671914in"}
![](media/image12.jpeg){width="2.5416666666666665in"
height="1.870295275590551in"}

4.隐藏点和序列点是完全可以自定义的位置，你还可以弄成横排的或者环形的。设计时，由于序列点没有指针，你可以在整体布局里面画一个指针，告诉玩家哪个是**有效点**。

![](media/image13.jpeg){width="2.2416666666666667in"
height="2.158641732283465in"}
![](media/image14.jpeg){width="2.285336832895888in"
height="2.2006944444444443in"}

**限量**

限量分为下面两种。

> **背包限制**：根据玩家持有的物品来决定购买情况。

**库存限制**：根据商店持有的数量来决定购买情况。

你可以修改最大值显示，来表示库存或背包的信息。

（背包限制和库存限制都可以显示最大值或者只显示剩余量，只是含义不一样）

![](media/image15.png){width="3.9863156167979in"
height="1.1597823709536308in"}

![](media/image16.png){width="1.8750962379702538in"
height="0.7639282589676291in"}
![](media/image17.png){width="2.1320538057742784in"
height="0.7222594050743657in"}

**\
**

**多买涨价**

限量商店的商品，是一个一个卖的。因此公式与前一次购买的结果有关系：

![](media/image18.jpeg){width="5.768055555555556in"
height="2.022222222222222in"}

**价格倍率是呈指数增长的**，假设原价100，价格倍率为2.00，增量0。

第一次买为100，第二次买为200，第三次买为400，第四次买为800。

（一般稀有宝物或者限量道具的价格都是呈指数增长，少有线性增长的价格，因为玩家后期挣钱的速度，远远比前期要快得多，不是单纯的线性增长。）

另外，**倍率计算后，小数点后面只要存在位数，就会进1位**。通过倍率计算/价格调整后的最小价格为1。

**服务员**

服务员可以对以下情况作出不同gif动作：

> \"欢迎光临\"：刚进入界面时触发。

\"购买一个物品\"：玩家购买了一个物品时触发。

\"余额不足\"：玩家买不起时点击购买触发。

\"库存不足\"：库存限制的物品，在库存不足时触发。

\"背包满了\"：背包限制的物品，在背包满了时触发。

![](media/image19.png){width="1.65in"
height="3.4090912073490816in"}![](media/image20.png){width="3.3993503937007876in"
height="3.5701388888888888in"}

配置中稍微有些绕，你可以参考示例中的配置，多试试就能熟悉。

## **其它说明**

暂无
