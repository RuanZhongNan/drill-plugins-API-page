## 概述

### 概念介绍

**窗口：**指rmmv核心结构中，定义的一个具有 背景皮肤、文本域 的 贴图 。

（窗口本质就是贴图，但是平常说的贴图，都不包括窗口。）

![](media/image1.png){width="2.033333333333333in"
height="0.6127110673665792in"}

**含选项的窗口**：指在窗口的基础上，再含有选项、键盘鼠标控制切换选项功能的窗口。

![](media/image2.png){width="1.151146106736658in"
height="1.0166666666666666in"}

### 名词索引

以下你可以按住ctrl键点击下面的词，可以直接定位到想了解的名词：

  -----------------------------------------------------------------------
  基本结构          [界面](#界面) [背景](#背景) [底图](#_Hlk36022738)
                    [窗口](#窗口) [贴图](#贴图) [整体布局](#整体布局)
  ----------------- -----------------------------------------------------
  分辨率            [默认分辨率](#默认分辨率) [修改分辨率](#修改分辨率)

  窗口              [窗口常见参数](#常见参数) [窗口布局](#窗口布局)
                    [互斥性](#互斥性)

  文本域            [文本域](#文本域) [文本域中的选项](#文本域中的选项)

  含选项的窗口      [列数](#列数) [每条选项高度](#每条选项高度)
                    [最大选项显示数](#最大选项显示数)
  -----------------------------------------------------------------------

### 思维导图

窗口与布局的思维导图如下：（你可以控制word右下角的缩放比例，看清小字）

![](media/image4.emf)

## 基本结构

### 快速区分

由于插件中描述的比较口语化，这四个名词指代的并不具体，理解大意即可。

[]{#界面 .anchor}**界面:** 界面是指用户 当前看到
的游戏窗口内的所有图像画面。在脚本中称为Scene。每个界面只能单独运行，运行时其他界面处于暂停状态。（可以见基本定义的"界面.docx"）

![F:\\rpg mv箱\\Image
3.jpg](media/image5.jpeg){width="2.8666666666666667in"
height="2.116165791776028in"}
![](media/image6.png){width="1.8851531058617672in"
height="1.270138888888889in"}

[]{#背景 .anchor}**背景(底图):** 这里的背景泛指 装饰底图
的菜单插件，有时也表示底图本身。

![F:\\rpg mv箱\\Image
4.jpg](media/image7.jpeg){width="3.033333333333333in"
height="1.174673009623797in"}

[]{#贴图 .anchor}**贴图:** 贴图就是一张图片。在脚本中称为Sprite。

贴图通常被作为 按钮、背景贴图、前视图、头像、框 等使用。

![](media/image8.png){width="1.2in" height="0.45in"}

[]{#窗口 .anchor}**窗口:** 是一个具有 背景皮肤、文本域 的
贴图。在脚本中称为Window。

窗口的 文本域 的长宽决定了显示的文本量、滚动条、选项宽度等。

在旧版文档中，文本域被叫做"有规划的矩形"，实际上意思一样。

![F:\\rpg mv箱\\Image
5.jpg](media/image9.jpeg){width="1.6333333333333333in"
height="1.592156605424322in"}

### 窗口与界面

一个菜单界面可以分成如下结构：

![](media/image10.emf)

**菜单界面**：是一种已定制好的界面，包含底图和功能部件。[]{#_Hlk36022738
.anchor}

**底图**：可以被主菜单相关装饰插件进行装饰，通过 界面关键字 来装饰。

**功能部件**：功能部件即界面中固定设置好的窗口、贴图等内容。

举个例子，原始的rmmv主菜单的部件结构如左图。（由 3个窗口 组成）

rmmv本体没有定制菜单的渠道，所有可定制的菜单，都是通过插件一个个配置的。

![](media/image11.emf)

你可以通过全自定义主菜单面板插件，把菜单选项窗口和角色窗口变成更灵活的按钮组配置，具体可以看后面章节。

### 游戏分辨率

[]{#默认分辨率
.anchor}**默认分辨率**：rmmv的固定游戏大小是816\*624像素，你可以对进行缩放或者全屏。

注意，简单的缩放并不增加分辨率，如果把窗口拉伸，拉伸至全屏，图像会变模糊，因为图片的内容还是原来的816\*624。

[]{#修改分辨率
.anchor}**修改分辨率**：打开yep核心引擎插件，设置屏幕宽度为916，然后设置战斗背景重置。

![](media/image12.png){width="3.533333333333333in"
height="1.9338823272090988in"}

于是可以看到下面的窗口被拓宽了100像素的距离。

![C:\\Users\\Administrator\\AppData\\Roaming\\Tencent\\Users\\1355126171\\QQ\\WinTemp\\RichOle\\5\$AG9\`Q\`\_S1F\`IWT2(SMB%H.png](media/image13.png){width="4.883333333333334in"
height="3.468632983377078in"}

**由图可知，如果你修改了游戏的分辨率，那么原来规划的816\*624的所有窗口布局，包括画面镜头ui的位置，全部要进行修正**。

你需要将整体布局的图片更换成916\*624大小，以及修改按钮组等所有面板的x位置。

## 窗口 {#窗口-1}

### 常见参数

面板插件把大部分能调控的窗口相关参数都调出来了，通常窗口都有以下配置属性：

+-----------+---------------------------+------------------------------+
|           | **配置参数（旧）**        | **配置参数（最新）**         |
+===========+===========================+==============================+
| **平移**  | 平移-窗口 X               | 窗口 X                       |
|           |                           |                              |
|           | 平移-窗口 Y               | 窗口 Y                       |
+-----------+---------------------------+------------------------------+
| **属性**  | 窗口高度                  | 窗口高度                     |
|           |                           |                              |
|           | 窗口宽度                  | 窗口宽度                     |
|           |                           |                              |
|           | 窗口字体大小              | 窗口字体大小                 |
+-----------+---------------------------+------------------------------+
| **移      | 窗口起点 X                | 移动动画：                   |
| 动动画**  |                           |                              |
|           | 窗口起点 Y                | 移动类型                     |
|           |                           |                              |
|           | 窗口移动时长              | 移动时长                     |
|           |                           |                              |
|           |                           | 移动延迟                     |
|           |                           |                              |
|           |                           | 起点：                       |
|           |                           |                              |
|           |                           | 坐标类型                     |
|           |                           |                              |
|           |                           | 相对坐标 X                   |
|           |                           |                              |
|           |                           | 相对坐标 Y                   |
|           |                           |                              |
|           |                           | 绝对坐标 X                   |
|           |                           |                              |
|           |                           | 绝对坐标 Y                   |
+-----------+---------------------------+------------------------------+
| **布局**  | 是否使用窗口布局          | 布局：                       |
|           |                           |                              |
|           | 资源-窗口                 | 布局类型                     |
|           |                           |                              |
|           | 平移-窗口布局 X           | 资源-贴图                    |
|           |                           |                              |
|           | 平移-窗口布局 Y           | 贴图位置修正 X               |
|           |                           |                              |
|           |                           | 贴图位置修正 X               |
+-----------+---------------------------+------------------------------+
| **含      | 窗口列数                  | 窗口列数                     |
| 选项的窗  |                           |                              |
| 口属性**  |                           | 每条选项高度                 |
|           |                           |                              |
|           |                           | 指针与边框：                 |
|           |                           |                              |
|           |                           | 是否启用菜单指针             |
|           |                           |                              |
|           |                           | 是否锁定菜单指针样式         |
|           |                           |                              |
|           |                           | 锁定的菜单指针样式           |
|           |                           |                              |
|           |                           | 是否启用闪烁白矩形           |
|           |                           |                              |
|           |                           | 是否启用菜单边框             |
|           |                           |                              |
|           |                           | 是否锁定菜单边框样式         |
|           |                           |                              |
|           |                           | 锁定的菜单边框样式           |
|           |                           |                              |
|           |                           | 是否启用滚动条               |
|           |                           |                              |
|           |                           | 是否锁定滚动条样式           |
|           |                           |                              |
|           |                           | 锁定的滚动条样式             |
+-----------+---------------------------+------------------------------+
| **其      | （其它属性）              | （其它属性）                 |
| 他属性**  |                           |                              |
+-----------+---------------------------+------------------------------+

由于插件在不断更新，后续窗口可能会够更多的配置参数。

不过，窗口主要的位置、高、宽、布局等属性，已经够用了，其它参数都是锦上添花。

（如果继续深究，配置参数那真的是数不胜数。如果你对这些更深入的细节有需求，可以去学学脚本，尝试自己修改窗口的window和window_base类的属性吧。）

**\
**

### 布局

通常的布局，是指物体摆放位置、排列方式之类的。由于在插件中最初定义时，"布局"这个词的概念没有定义好，现在也不方便全部推翻重新定义，所以现在仍然保留原定义。

[]{#整体布局
.anchor}**整体布局**：是指界面中可以配置的一个在所有窗口最前面的贴图，可以挡住窗口。

![F:\\rpg
mv箱\\mog插件中文全翻译(Drill_up)v2.32\\插件集合示例\\img\\Menu\_\_main\\主菜单-布局.png](media/image14.png){width="2.329861111111111in"
height="1.7875in"} ![](media/image15.png){width="2.3867125984251967in"
height="1.7955074365704287in"}

[]{#窗口布局 .anchor}**窗口布局**：是指窗口的皮肤设置或者单张背景贴图。

![F:\\rpg
mv箱\\mog插件中文全翻译(Drill_up)v2.32\\插件集合示例\\img\\Menu\_\_shop\\商店界面-购买窗口.png](media/image16.png){width="2.303472222222222in"
height="2.1167049431321083in"}
![C:\\Users\\lenovo\\AppData\\Roaming\\Tencent\\Users\\1355126171\\QQ\\WinTemp\\RichOle\\VU\~\@G9\`50H5WCIV7\$KPP\`}Y.png](media/image17.png){width="2.4705424321959755in"
height="2.1274825021872266in"}

#### 固定大小的窗口布局

配置中，你可以直接设置布局类型，控制相应的贴图布局。

![](media/image18.png){width="3.091666666666667in"
height="1.3556299212598426in"}

旧配置中也可以实现图中的三种布局类型，设置方法如下：

旧配置为：使用贴图布局（true），不使用贴图布局（false）。

![](media/image19.png){width="3.5749978127734034in" height="1.0in"}

使用，表示窗口布局为一张图片；

不使用，表示窗口布局为rmmv默认的系统布局。

![](media/image20.png){width="0.6801038932633421in"
height="0.8223075240594926in"}![](media/image21.png){width="4.074468503937008in"
height="0.8158377077865266in"}

不使用窗口布局：（rmmv设置的对话窗口那种布局）

![](media/image22.png){width="0.7972954943132109in"
height="0.9258923884514436in"}![](media/image23.png){width="4.053029308836395in"
height="0.8303083989501312in"}

如果你设置使用布局，但是设置图片**为空**的话，那么将只显示透明文字：

![](media/image24.png){width="4.323515966754155in"
height="0.8496905074365704in"}

#### 变化大小的窗口布局

如果窗口是伸缩的，自适应的，布局的分类就会变得更多了。

因为窗口内部的说明文字会根据不同组合有长有短，如果超出了界限，图片就不能像系统布局那样支持大小变化了。

你可以限制说明文字的行列，也可以使用新定义的系统布局：

![](media/image25.png){width="4.135416666666667in"
height="1.7591633858267717in"}

由于变化的窗口的高度和宽度由文字的长短来决定，所以你可以通过设置
**内边距、行间距、字体大小** 来控制窗口的属性。

![](media/image26.png){width="2.6770833333333335in"
height="1.0382042869641295in"}

### 布局与文本域

[]{#文本域
.anchor}**文本域**：即绘制文字、图片的区域，选项也只能绘制在文本域中，不能越界。

文本域与窗口的高宽有一环白色的内边距，通常为18像素左右。

（引擎核心插件可以调整内边距）

在旧版文档中，文本域被叫做"有规划的矩形"，实际上意思一样。

![](media/image27.emf)

**含选项窗口的文本域**：在含选项的窗口中，上侧和下侧中心会提供切换选项小箭头。左侧和右侧会提供滚动条功能，所以内边距不要设置太小了。不然会挤在一起。

![](media/image28.emf)

[]{#文本域中的选项
.anchor}**文本域中的选项**：文本域中，选项之间是直接紧密相贴的。

如果窗口中有"每条选项高度"属性，那么文本域分配选项剩余的高度时，会留出空白。

如果窗口中为"最大选项显示行"属性，那么选项会根据文本域高度，自动分配选项高度。

![](media/image29.emf)

**单张贴图背景**：由于使用布局时，文本域是不可见的，所以在配置贴图背景时，很容易产生偏差。你可以先设置默认皮肤，确定文本域和窗口的位置，再对贴图背景进行修正。

![](media/image30.png){width="5.095744750656168in"
height="1.0596062992125985in"}

### 窗口互斥性

[]{#互斥性
.anchor}**互斥性**：窗口之间相互交织时，会出现遮挡的情况。即使窗口完全透明，也会造成遮挡。

出现互斥的情况，与窗口本身的先后顺序与绘制关系相关。所以你需要尽量保持窗口之间有足够的空间，并且移动动画也要避免交织。

另外，单张贴图背景 之间不会被遮挡，所以贴图背景可以相对画大一些。

![](media/image31.png){width="4.45777668416448in"
height="3.6766240157480317in"}

### 窗口隐藏

设置 窗口、文字 的y轴1000以上，让玩家在窗口中看不见就可以了。

注意，该方法对 **含选项的窗口**
不适用，因为有选项的窗口对于当前选项是有左右控制的，虽然看不见，但是操作是有键盘动作的。

（在部分菜单中，有通过改变 流程
的方式来隐藏选项窗口的功能，那个可以消除键盘动作的关联。）

## 含选项的窗口

### 含选项的窗口

前面已经介绍了含选项窗口的部分内容，这里重新整理一下。

**含选项的窗口**：指在窗口的基础上，再含有选项、键盘鼠标控制切换选项功能的窗口。

![](media/image2.png){width="1.151146106736658in"
height="1.0166666666666666in"} ![](media/image32.emf)

**文本域中的选项**：文本域中，选项之间是直接紧密相贴的。

如果窗口中有"[]{#每条选项高度
.anchor}每条选项高度"属性，那么文本域分配选项剩余的高度时，会留出空白。

如果窗口中为"最大选项显示行"属性，那么选项会根据文本域高度，自动分配选项高度。

![](media/image29.emf)

[]{#列数 .anchor}**列数**：窗口选项可以支持多列，但是多列时，是 **固定**
以宽度为准按比例分配的。

![](media/image33.emf)

[]{#最大选项显示数
.anchor}**最大选项显示数**：注意，这个不是可以配置的参数。因为选项的高度与文本域的高度，直接决定了最大选项显示的数量。

比如文本域高度为100，选项高度为30，那么最多能显示 100/30 =
3.33，3个选项。

如果窗口中有3个以上的选项，那么在上下滚动翻页时，则会瞬间刷新选项内容。

（按钮组滚动时也是一样的效果）

![](media/image34.emf)

### 选项与按钮组

选项窗口可以通过按钮组核心插件，把窗口变为按钮组。

两者的结构不一样，但是本质上非常相似。

具体可以去看看"关于按钮组核心.docx"。

![](media/image35.emf)

按钮组直线排列：

![](media/image36.emf)

按钮组环形排列：

![](media/image37.emf)

## 规划窗口

### 开始规划自己的窗口

以全自定义装备窗口为例，我们这里先把全部窗口的**默认布局**打开：

![](media/image38.png){width="3.287234251968504in"
height="2.5004286964129485in"}

**你如果一开始就使用贴图布局，就无法知道自己设置的规划矩形的宽高会是什么样。**

装备窗口有5个窗口，其中选项窗口、武器槽、武器列表三个窗口由于高度原因，是挤在一起的。（上面的ui可能看不出来，看看下面这个）合理超出一点高度无伤大雅。

![](media/image39.png){width="0.6666666666666666in"
height="0.9042158792650918in"}

下面的黄色框为宽高，红色点为x，y坐标。

![H:\\rpg mv
箱\\B7RVRSRNG\[\]Y}LBZ\$O\@2O05.jpg](media/image40.jpeg){width="3.4361701662292212in"
height="2.611020341207349in"}

从图中可以看出来，这些窗口都是被紧密排在一起的，几乎没有多余的空间可以分配。不过，你可以把最下方的注释窗口隐藏（设置y1000），以及装备插件的选项窗口设置隐藏，空间就有了。

**规划时，建议用ps确定红色的点位置以及黄色矩形的宽高。**

![](media/image41.png){width="3.6041666666666665in"
height="2.1888320209973755in"}

**窗口都有自己的滚动条，如果高度不够，会出现滚动条。**

当然，如果你的贴图布局与滚动条在一起看起来格格不入的话，就不要压缩高度了。

![](media/image42.png){width="3.8229166666666665in"
height="1.8711953193350832in"}

**窗口的内容如果超出了宽度，那么内容会直接被遮挡。**

这里注意内容不要太长就可以了，当然宽度也不要太窄了。

![](media/image43.png){width="2.9791666666666665in"
height="1.522684820647419in"}

另外，**窗口的列数，一般控制选项的窗口可以设置列数。**

选项窗口的三个按钮，就是一个横向的3列选项。下面的武器槽窗口是一列。

列数不要设置太多，否则会发生错位情况。

![](media/image44.png){width="4.385416666666667in"
height="1.3296653543307086in"}

有些选项会根据宽度压缩，但是有些就不会，不会压缩的需要慢慢试才能知道。

**当你规划完以上布局之后，你就可以换上自己的贴图了。**

窗口布局xy值用与修正图片的偏移位置，你在规划完布局之后，再贴图，根据贴图的位置调整偏移量。

窗口的起点xy值是用于窗口渐变出现用的，xy都设置为0将会在原地慢慢显现。

如果你要窗口在原地，而且立刻显现，设置xy都为0，并把移动时长改成1。

**如果你想设计完全属于自己的菜单面板，就去看看示例中的全自定义信息面板吧！面板中的所有内容你可以全部自己添加，包括使用颜色、变量、甚至图标！**

### 开始规划战斗角色窗口

**与规划窗口一样，一开始把干扰项先置0。**（平移-面板 xy坐标0,0）

角色窗口中的角色面板组，是分4人和4人以上两种情况的。

其中自适应是把x或者y方向的坐标设置成与玩家数量相关的**居中**措施。

**如果你使用了水平模式，就开启水平自适应，不要使用垂直自适应。**

下面的是水平自适应的样子：**（红点表示适应点）**

![](media/image45.png){width="2.6025634295713034in"
height="1.8125in"}![](media/image46.png){width="2.375in"
height="1.6887160979877516in"}

将平移-面板x设置为合适的修正值（比如-90，要根据你的图片资源定）

设置 平移-面板y ，把窗口都移下来就可以了（480）。

**垂直与水平同理，垂直模式下设置垂直自适应：**

![](media/image47.png){width="2.2083333333333335in"
height="1.652820428696413in"} ![](media/image48.png){width="2.28125in"
height="1.6479702537182852in"}

将平移-面板y设置为合适的修正值（-45），

然后平移-面板x ，设置窗口的横向偏移量就可以了。

**如果你关闭自适应的话，间距和W间距关系，参照前一章"排布方式"来控制。**

其中，配置的优先权如下：

x轴： 固定位置 \> 自适应 \> 间距/w间距

y轴： 固定位置 \> 自适应 \> 间距/w间距

注意，x轴设置了自适应，y轴是可以设置w间距的。

下面的是5人自适应x轴，w间距设置了40的情况。

![](media/image49.png){width="3.54122375328084in"
height="2.395533683289589in"}

## 其他说明

### Mog旧插件

◆MOG_MenuBackground.js 主菜单 - 菜单背景

如果你还在用MOG_MenuBackground插件，建议设置透明度为255。由于这个设置影响所有的菜单，所以不建议使用。

![](media/image50.png){width="5.158333333333333in"
height="2.05376968503937in"}

另外，不建议用脚本直接修改游戏里面 窗口基类 的透明度。

因为进入菜单时，菜单框有渐变过程，若固定了透明度，那么框的渐变过程会直接失效。

（如果你看见了其它直接控制全部菜单透明度的插件，尽量避免使用）
