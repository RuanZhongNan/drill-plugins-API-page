## 概述

### 插件介绍

插件基于核心：

◆Drill_CoreOfBallistics 系统 - 弹道核心

◆Drill_CoreOfGaugeMeter 系统 - 参数条核心

◆Drill_CoreOfGaugeNumber 系统 - 参数数字核心

插件本体：

◆Drill_GaugeForVariable UI -- 高级变量固定框

该插件的扩展：

（暂无）

该插件的配置项非常多，需要花较长的时间耐心学习。

### 插件关系

高级变量固定框的关系如下图。

![](media/image2.emf)

## 固定框样式

### 结构

固定框的结构如下图所示。

**简单来说，变量框就是
外框+n个槽样式。每个槽样式都有1个参数条、1个参数数字、1个名称。参数条和参数数字要去相应的核心先设计好，再贴到框样式中**。

![](media/image3.emf)

固定框样式需要用过变量框设置来绑定变量/物品数据。绑定后，变量/物品的数据值会提供给相应的
参数条和参数数字，参数条和参数数字会根据参数的值，进行自我变化。

以 标准风格 和 垂直表单风格 为例，大致结构如下：

![](media/image4.png){width="5.768055555555556in"
height="2.826388888888889in"}

### 槽样式/槽数据

一个变量框可以有多个槽，每个槽都有1个参数条，1个参数数字，1个名称。

槽的数量没有限制，你可以在一个样式里面放很多个槽。

![](media/image5.png){width="3.7503248031496064in"
height="2.5335531496062993in"}

如果你在样式中配置了3个槽，那么在变量框设置中，需要填写3个配置数据。

![](media/image6.png){width="5.2754571303587054in"
height="1.9084984689413824in"}

![](media/image7.png){width="5.216666666666667in"
height="1.546534339457568in"}

### 参数条

**1) 参数条样式**

下图为背景框与参数条的组合关系。

**参数条的详细样式配置，可以去看看"关于参数条.docx"，这里不赘述**。

参数条：（参数条核心中配置，段资源+流动+遮罩）

![C:\\Users\\lenovo\\AppData\\Local\\Microsoft\\Windows\\INetCache\\Content.Word\\变量框样式4-参数条.png](media/image8.png){width="5.764583333333333in"
height="0.10902777777777778in"}

![C:\\Users\\lenovo\\AppData\\Local\\Microsoft\\Windows\\INetCache\\Content.Word\\变量框样式4-参数条遮罩.png](media/image9.png){width="2.7645833333333334in"
height="0.15138888888888888in"}

外框：（高级变量固定框中配置）

![](media/image10.png){width="2.4916666666666667in"
height="0.6166666666666667in"}

组合后形成：

![](media/image11.png){width="2.5391786964129484in"
height="0.7226891951006125in"}

配置参数条坐标时，注意要使得参数条与背景框完美嵌入。

**2) 加满动画**

加满动画是指，框出现时，参数条加满过程的动画。

**注意，当你切换菜单界面、切换地图、进入新战斗时，参数条会重复播放一次加满动画**。

![](media/image12.png){width="3.5753094925634294in"
height="1.1834361329833771in"}

该动画在许多动作类游戏中的boss都有展现。而在变量框中不常用，一般建议关闭。

**3) 插件指令修改段上限**

变量框中，你可以通过插件指令临时修改段上限。

![](media/image13.png){width="4.450386045494313in"
height="0.6167202537182852in"}

### 参数数字

**1) 参数数字样式**

**参数数字的详细样式配置，可以去看看"关于参数数字.docx"，这里不赘述**。

![](media/image14.png){width="2.658333333333333in"
height="0.26666666666666666in"}

![](media/image15.png){width="3.3752919947506563in"
height="0.5667158792650918in"}

图中有背景框，1个参数条，1个参数数字。

图中的数字绑定了一个变量，该变量会随时间变化。

变量数字：右对齐 + 额定值关闭

**2) 插件指令临时显示数字**

你可以使用插件指令设置参数数字在战斗或者地图中出现。

![](media/image16.png){width="4.392047244094488in"
height="1.6501432633420823in"}

但是前提是，你必须配置样式，如果样式为0，则什么都看不见。

额定值也必须开启，不然修改额定值没有任何效果。

![](media/image17.png){width="3.5586417322834647in"
height="2.141852580927384in"}

### 名称显示

**1) 特殊字符**

名称暂时不能支持特殊字符，也不能支持高级颜色。

**2) 对齐方式**

注意，这里的名称是固定的左对齐，无法控制居中或者右对齐。

你只能手动控制坐标，调整名称移动至合适的位置。

![](media/image18.png){width="2.9585892388451445in"
height="1.4334580052493437in"}

**3) 插件指令修改名称**

你可以使用插件指令临时修改指定框的 对应槽 的名字。

![](media/image19.png){width="4.092020997375328in"
height="0.3083595800524934in"}

![](media/image20.png){width="2.3418700787401576in"
height="1.425123578302712in"}

## 变量框设置

### 绑定关联

变量框设置的结构如下图所示。

![](media/image21.emf)

变量框设置的配置比较杂，因为你可以使用相同的样式，来显示多个不同的数据。你可以参考
垂直表单风格 的设置，同一种样式的风格，可以显示不同的数据。

![](media/image22.png){width="3.925340113735783in"
height="0.4750415573053368in"}

![](media/image23.png){width="2.5335531496062993in"
height="0.883409886264217in"}
![](media/image24.png){width="2.783333333333333in"
height="0.9400185914260717in"}

![](media/image25.png){width="2.4168766404199475in"
height="0.8750754593175853in"}
![](media/image26.png){width="2.6083333333333334in"
height="0.9568613298337708in"}

变量 --> 样式 是一对一 关系， 样式 -\> 变量 是一对多 关系。

物品 --> 样式 是一对一 关系， 物品 -\> 变量 是一对多 关系。

也就是说，样式可以对应给多个物品/变量，而每个物品/变量只能对应一个样式。

**变量框可以放置一大堆，不过你需要合理分配位置，使得变量框、boss框、菜单ui等各个部件不会拥挤在一起。**

## 设计

### 配置流程

**由于高级变量框、参数条核心、参数数字核心中都有不同的关联配置，这里建议使用**

**"风格"来区分不同的变量框样式**。防止各个配置纠缠在一起，难以区分。

![](media/image27.png){width="5.768055555555556in"
height="4.134027777777778in"}

在文件夹中查看时，建议将内容平铺，方便看图片名称和分辨率。

![](media/image28.png){width="5.768055555555556in"
height="2.6041666666666665in"}

### 示例风格

以下为示例中提供的风格：

**像素风格资源表**：

![](media/image29.png){width="4.1170231846019245in"
height="0.6083858267716535in"}

**像素风格资源表(文字)**：

![](media/image30.png){width="4.533725940507437in"
height="0.5750503062117235in"}

**垂直表单风格**：

![](media/image24.png){width="2.783333333333333in"
height="0.9400185914260717in"}

**标准风格**：

![](media/image31.png){width="3.4669674103237096in"
height="0.5417136920384952in"}

**标准风格(多段)**：

![](media/image32.png){width="3.275284339457568in"
height="0.4583727034120735in"}

**凹槽板风格**：

![](media/image33.png){width="2.8335793963254594in"
height="0.808403324584427in"}

**计分板风格：**

![](media/image34.png){width="2.025174978127734in"
height="0.7417311898512686in"}

### 参考对象

**变量框的设置非常多，由于与变量直接关联，只要你有想法，都可以模仿实现出来**。

以下是一些游戏的变量框参考：

《q宠企鹅》无敌泡泡王的加载条

背景 + 参数条（1段 + 不流动 + 粒子效果 + 游标）

![](media/image35.png){width="5.301420603674541in"
height="1.2498436132983377in"}

《星露谷物语》 的体力条

结构为：背景 + 参数条（1段 + 不流动 + 旋转90度 + 弹出条）

![](media/image36.png){width="0.5504002624671916in"
height="1.8105260279965005in"}

《星际争霸2》 的经验条

结构为：背景 + 参数条（1个层级 + 不流动 + 游标）

这里的游标，是非常亮的那一圈光线。（后面的指针做不了......）

![](media/image37.png){width="5.768055555555556in"
height="0.8565299650043745in"}

《火炬之光2》的某魔法buff的持续时间显示框（用缓冲时间条也可以做）

背景 + 参数条（1段 + 不流动）

![](media/image38.png){width="4.31196084864392in"
height="1.187351268591426in"}

《怪物猎人》的生命条和耐力条

背景 + 槽1：生命条（1段 + 不流动） + 槽2：耐力条（1段 + 不流动）

![](media/image39.png){width="5.768055555555556in"
height="1.038888888888889in"}

《魔兽争霸3》的任务计分板

背景 + 名称 + 参数数字（右对齐）

![](media/image40.png){width="1.9164271653543308in"
height="0.666583552055993in"}

## 从零开始设计

在开始设计前，你可以先了解一下 [变量框的配置流程](#配置流程) 。

### 1.设置一个目标

首先要想明白自己想创建一个什么样的boss生命框，这一点非常重要。Boss框的功能并不是堆得越多越好，重点还是要贴合你游戏的画风。

之前也做过一些简单的变量框，比如下面是一些灵感草稿，基本都是名字、参数条、参数数字三者强行加上：

![H:\\rpg mv
箱\\未标题-1.jpg](media/image41.jpeg){width="2.783333333333333in"
height="1.1766251093613298in"}

![H:\\rpg mv 箱\\未标题-2.jpg](media/image42.jpeg){width="2.925in"
height="1.2365135608048994in"}

这里，我想做一个不一样的。

比如，示例游戏中有收集矩量水晶的小任务，我想把它做成下面这样：

![](media/image43.png){width="4.739995625546807in"
height="0.6583333333333333in"}

### 2.结构分解，规划区域

你需要将 参数条、参数数字、外框
的结构分离。因为三者都在不同的插件中配置。

经过分析，需要设置3个槽样式，每个槽样样式只勾选参数数字结构，姓名和参数条都关闭。由于变量固定框没有图标文本功能，这里将图标画在外框背景中即可。

![](media/image44.png){width="5.768055555555556in" height="1.55625in"}

### 3.起草资源

**1）参数数字资源**

参考图中的数字非常简洁干净，这里我打算使用自己画的像素数字来进行模仿，先开启2x2的网格：

![](media/image45.png){width="3.4833333333333334in"
height="1.2940244969378827in"}

![](media/image46.png){width="3.3407819335083113in" height="2.0in"}

由于之前在 "关于缓冲时间条与数字.docx"
中画过数字点阵图，受到其灵感的影响，这里为画的第一个数字0：

![](media/image47.png){width="2.1085159667541555in"
height="1.5251323272090989in"}

接下来画好剩余的数字。

![](media/image48.png){width="5.768055555555556in"
height="0.8659722222222223in"}

由于数字会被平均切割成14份，这里画好后，需要检查一下。

![](media/image49.png){width="2.8333333333333335in"
height="1.2898556430446195in"}

发现网格和等份线并没有贴合。后来发现是数字之间像素间距的问题。

这里每个数字的大小为12x18。

![](media/image50.png){width="3.5in" height="1.509601924759405in"}

![](media/image51.png){width="2.2416666666666667in"
height="1.4659251968503937in"}

![](media/image52.png){width="5.283791557305337in"
height="0.7083945756780402in"}

**2）外框背景**

考虑到示例中要收集100多个水晶，那么字符的间距至少要"100/100"，7个字符，那么一个槽的宽度至少为：12\*7
= 84像素。

把矩量水晶放入，由于矩量水晶的图标是32x32大小，所以这里看起来间距需要加大。

![](media/image53.png){width="3.8003291776027996in"
height="1.2417738407699037in"}

初步考虑后，将分成下面三种表示物：矩量水晶、得分分数、小型HP药水数量。

![](media/image54.png){width="4.000346675415573in"
height="0.8167377515310587in"}

![](media/image55.png){width="1.2667760279965004in"
height="0.8667421259842519in"}

### 4.配置样式

**1) 参数数字配置**

进入参数数字核心。首先是矩量水晶的符号，矩量水晶的数字是"100/100"的格式，所以这里需要启用额定值。注意是左对齐。

另外，这里的默认额定值不需要考虑，因为变量框插件的数据后面会覆盖这个值。

![](media/image56.png){width="2.6083333333333334in"
height="1.282169728783902in"}![](media/image57.png){width="2.941666666666667in"
height="1.2911384514435695in"}

![](media/image58.png){width="2.766906167979003in"
height="0.6583902012248469in"}

一般数字就简单配置就可以。

![](media/image59.png){width="2.5in" height="1.6786570428696412in"}

**2) 变量框配置**

进入 高级变量固定框 插件。进入固定框样式，先把背景配上。

这里提及一下，固定框样式 和 变量框配置
之所以分开，是因为前者是样式，后者是数据。*数据有可能会在游戏中临时修改，而样式是固定之后不再变化的。*

![](media/image60.png){width="3.15in" height="2.083630796150481in"}

接下来，进入槽样式列表，把3个槽加上。每个槽的名称和参数条都关闭。

![](media/image61.png){width="3.7083333333333335in"
height="1.9268788276465443in"}

![](media/image62.png){width="3.7503248031496064in"
height="1.1334317585301836in"}

[]{#PS对坐标点
.anchor}**PS对坐标点**：这里比较关键的是要对齐数字的位置与外框的坐标，由于设置了左对齐，参数数字的中心锚点在左中心，所以你需要确定下图的坐标。

![](media/image63.png){width="5.15in" height="2.101913823272091in"}

接下来，把后面两个数字的坐标也对上，并填入：

![](media/image64.png){width="2.6252274715660544in"
height="0.8667421259842519in"}![](media/image65.png){width="2.650229658792651in"
height="0.900077646544182in"}

![](media/image66.png){width="2.683566272965879in"
height="0.808403324584427in"}

### 5.放置一个实例

下面，进入变量框设置，配置一个实例：

![](media/image67.png){width="3.466666666666667in"
height="2.3747419072615923in"}

因为样式1中配置了3个槽，这里的槽数据也要配置3个。这里，段上限和名称都是用不上的参数。（这里我忘了地图里面有多少个水晶，额定值先暂定为128个吧。）

![](media/image68.png){width="4.6in" height="2.7950218722659668in"}

其中得分分数和小型HP药水都没有开额定值，所以也不需要配置。

![](media/image69.png){width="3.200277777777778in"
height="0.9500820209973754in"}

可以看到游戏中出现了框，但是有些参数需要微调。

![](media/image70.png){width="5.100441819772528in"
height="0.7917355643044619in"}

### 6.细节调整

首先，这里的药水数字的y值没有对齐，打开槽样式调整好。设为16。

![](media/image71.png){width="0.9917530621172354in"
height="0.5500481189851268in"}

![](media/image72.png){width="4.375in" height="2.26334864391951in"}

测试前，有时候经常会忘了一些默认资源没有配，这里需要回去找到配置，把资源的设置设为空：

![](media/image73.png){width="5.258333333333334in"
height="0.9008683289588801in"}

原本制作时觉得会是简约风格，但是实际画出来之后，发现像素感非常浓，所以这里改名为像素风格啦。

![](media/image74.png){width="2.6168930446194225in"
height="0.7583989501312336in"}

![](media/image75.png){width="3.191943350831146in"
height="0.6167202537182852in"}

### 7.收尾工作

功能已经完成了大半，还剩下矩量水晶任务完成时，额定值资源的变化。这里可以设置值满了后，变成黄色。

![](media/image76.png){width="1.5251323272090989in"
height="0.5000437445319335in"}

![](media/image77.png){width="2.125in" height="0.225in"}

![](media/image78.png){width="3.400294181977253in"
height="0.9250798337707786in"}

![](media/image79.png){width="1.7584853455818024in"
height="0.5167115048118985in"}

如果有必要，扩展符号也可以加上。

### 8.其他说明

**1) 含有参数条的变量框**

参数条比较麻烦的地方，就是需要要求外框和参数条本身完全吻合。

![](media/image80.png){width="5.133333333333334in"
height="0.8020833333333334in"}

这些都需要通过 [PS对坐标点](#PS对坐标点) 的方式对应。

确定参数条的基本坐标，然后设置条的位置。

![](media/image81.png){width="4.2842104111986in"
height="2.343918416447944in"}

![](media/image82.png){width="2.9473687664041996in"
height="0.990576334208224in"}

![C:\\Users\\Administrator\\AppData\\Roaming\\Tencent\\Users\\1355126171\\QQ\\WinTemp\\RichOle\\U{SXL229HVVWF\$POOSYW\[GA.png](media/image83.png){width="3.56875in"
height="0.7159722222222222in"}

**2) 将之前设计的像素风格的图标换成名称**

因为涉及了不同的资源图片，所以这里只能做成两种固定框样式来控制。

这里需要注意的是，绘制的名称是固定左对齐的，不能居中不能右对齐。需要慢慢偏移对齐到坐标。比较麻烦。

![](media/image84.png){width="5.0004330708661415in"
height="0.6750579615048119in"}

![](media/image30.png){width="4.533725940507437in"
height="0.5750503062117235in"}
